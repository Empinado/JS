<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button class="load-button">Upload news</button>
    <div class="newConteiner"></div>

    <script>
      const btn = document.querySelector(`.load-button`);
      const newConteiner = document.querySelector(`.newConteiner`);
      const mockDatabase = [
        { title: "news1", content: "text1" },
        { title: "news2", content: "text2" },
        { title: "news3", content: "text sadsadsa asdsadsad asdsadas" },
      ];

      function fetchNews() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            if (Math.random() > 0.1) {
              resolve(mockDatabase);
            } else {
              reject("Error upload news");
            }
          }, 2000);
        });
      }

      btn.addEventListener("click", () => {
        fetchNews()
          .then((data) => {
            data.forEach((news) => {
              const newsH = document.createElement("h2");
              newsH.textContent = news.title;
              const newsP = document.createElement("p");
              newsP.textContent = news.content;
              newConteiner.appendChild(newsH);
              newConteiner.appendChild(newsP);
            });
          })
          .catch((err) => {
            newConteiner.textContent = `Error: ${err}`;
          });
      });
    </script>
  </body>
</html>
